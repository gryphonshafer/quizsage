@use 'base';
@use 'vue';
@use 'colors';
@use 'fonts';
@use 'forms';

div.quiz_summary_box {
    border          : 1px solid colors.$lines;
    background-color: white;
    display         : inline-block;
    margin          : 0.5em;
    padding         : 0.5em;
    width           : 13em;
    height          : 11em;
    vertical-align  : top;
}

$active_bg_btn : #e0ff00;
$active_bg_cell: #e0ffd0;

div#quiz,
div#queries,
div#quiz_queries {
    p {
        margin-top   : 0.5em;
        margin-bottom: 0.5em;
    }

    select:focus, textarea:focus, button:focus {
        border-color    : colors.$lines;
        background-color: base.$form_button_bgcolor;
    }

    button {
        margin: 0.1em;

        &.selected {
            background-color: $active_bg_btn;
        }
    }

    div.query p.announcement span,
    div.query p.prompt,
    div.query p.reply,
    div.material span.reference,
    div.material p.content {
        border          : 1px solid colors.$lines;
        background-color: white;
        padding         : 0 0.2em;
    }

    div.query p.announcement {
        margin-top: 0;
    }

    div.material span.reference {
        padding: 0.05em 0.3em;
    }

    div.thesaurus {
        display: inline;

        ul {
            margin: 0 0 0 1em;
        }

        li {
            list-style : none;
        }

        & > ul {
            margin: 0;
        }

        & > ul > li:not(:first-child) {
            margin-top: 1em;
        }

        span {
            &.word {
                font-weight    : bold;
                text-decoration: underline;
            }

            &.required {
                color: blue;
            }

            &.ignored {
                font-style: italic;
                color     : green;
            }

            &.special {
                color: red;
            }

            &.item {
                position: relative;
            }

            &.item div.details {
                font-style      : normal;
                color           : black;
                display         : none;
                position        : absolute;
                top             : 100%;
                left            : 0;
                z-index         : 1;
                border          : 1px solid colors.$lines;
                background-color: white;
                padding         : 0 0.2em;
                transform       : translate( 0.5em, 0 );
                width           : 30em;
                max-height      : 20em;
                overflow-y      : auto;
            }

            @media ( max-width: 48em ) {
                &.item div.details {
                    width: 16em;
                }
            }

            &.item:hover div.details {
                display: block;
            }
        }
    }

    div.timer {
        float       : left;
        margin-right: 1em;
        position    : relative;

        div.timer_display {
            font-size       : 300%;
            font-weight     : bold;
            border          : 3px double colors.$lines;
            background-color: white;
            display         : inline-block;
            padding         : 0.25em 0.125em;
            margin-bottom   : 0.25em;
            width           : 1.6em;
            text-align      : center;
        }

        div.button_group {
            position: absolute;
            top     : 4em;
            left    : 0;
        }
    }

    div.select_type,
    div.results {
        min-width: 45em;
    }

    div.search {
        position: relative;

        label {
            margin-left: 0.5em;
        }

        table {
            position  : absolute;
            width     : calc( 100vw - 2em );
            box-shadow: 0px 0px 0.25em 0.25em colors.$background;
            margin-top: 0.5em;

            tr td:nth-of-type(2) {
                width: 6em;
            }

            tr.is_current_query td {
                background-color: $active_bg_cell;
            }

            span.match {
                font-weight: bold;
                color      : blue;
            }
        }
    }

    div.query {
        width: 30em;

        p.prompt {
            height : 3em;
            padding: 0.2em 0.5em;
        }

        p.reply {
            height : 10em;
            padding: 0.2em 0.5em;
        }
    }

    div.material {
        width: 30em;

        span.reference {
            margin-left : 0.5em;
            margin-right: 0.5em;
        }

        p.content {
            height : 14em;
            padding: 0.2em 0.5em;
        }
    }

    div.reading, div.operation {
        display       : inline-block;
        vertical-align: top;
        margin-right  : 1em;
    }
}

table.board {
    border: none;

    thead td {
        background-color: white;
    }

    td.top_left_corner {
        background-color: colors.$background;
        border-color    : colors.$background colors.$lines colors.$lines colors.$background;

        text-align    : right;
        vertical-align: bottom;
        padding-bottom: 0.5em;
        padding-right : 0.5em;
    }

    td.clickable {
        cursor: pointer;

        &:hover {
            background-color: $active_bg_cell;
        }
    }

    tr.selected td {
        background-color: $active_bg_cell;
    }

    td.selected {
        background-color: lightgreen;

        &:hover {
            background-color: lightgreen;
        }
    }

    tr.vertical td, td.vertical {
        writing-mode  : vertical-rl;
        padding       : 0.3em 0px 0.3em 0em;
        width         : 2.5em;
        vertical-align: middle;
    }

    @-moz-document url-prefix() {
        tr.vertical td, td.vertical {
            vertical-align: top;
            padding       : 0.3em 0 0.3em 1em;
        }
    }

    tr.center td, td.center {
        text-align: center;
    }

    tr.right td, td.right {
        text-align: right;
    }

    tbody tr td:nth-of-type(1) {
        width: 2em;
    }

    tbody tr td:nth-of-type(2) {
        width: 3em;
    }

    td.team_name,
    td.team_score_position,
    td.team_score_points {
        font-weight: bold;
    }

    td.team_name {
        padding-left: 0.7em;
    }
}

div#board {
    width     : max-content;
    margin    : 0 auto;
    overflow-y: scroll;
    max-height: calc( 100vh - 26px );

    table.board {
        margin: 0;

        button {
            display: none;
        }

        td.clickable {
            cursor: default;

            &:hover {
                background-color: white;
            }
        }

        td.selected {
            background-color: white;
        }

        &:nth-of-type(1) {
            position: fixed;
        }

        &:nth-of-type(1) tbody,
        &:nth-of-type(2) thead {
                visibility: hidden;
        }

        &:nth-of-type(1) tbody td,
        &:nth-of-type(2) thead td {
            border: 1px solid transparent;
        }

        td {
            padding-top   : calc( ( 5vw - 15px ) / 6 );
            padding-bottom: calc( ( 5vw - 15px ) / 6 );
        }
    }
}

div#board::-webkit-scrollbar {
    background: transparent;
    width     : 0px;
}

div#board {
    scrollbar-width   : none;
    -ms-overflow-style: none;
}

body.dark_mode {
    color           : white;
    background-color: black;

    table.board {
        td,
        td.selected {
            background-color: #1e1e1e !important;
            border-color    : darkslategray;
        }

        tr.selected td {
            background-color: #2a2d2e !important;
        }

        td.top_left_corner {
            background-color: black !important;
            border-color    : black darkslategray darkslategray black;
        }
    }
}

div#queries div.query_type_buttons {
    p {
        margin: 0;
    }

    button {
        display: block;
        margin : 1em 0;
    }
}

div#quiz_queries {
    div.intro {
        padding-bottom: 1em;
        border-bottom : 3px double colors.$lines;
        margin-bottom : 1em;
    }

    div.query_id {
        break-inside: avoid;
    }

    & > div.query_id ~ div.query_id {
        margin-top : 1em;
        border-top : 3px double colors.$lines;
        padding-top: 1em;
    }

    div.query {
        display       : inline-block;
        vertical-align: top;
        margin-right  : 1em;
    }

    p.announcement span {
        border          : 1px solid colors.$lines;
        background-color: white;
        padding         : 0 0.2em;
    }
}

@media print {
    .no_print {
        display: none;
    }
}
